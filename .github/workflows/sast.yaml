name: Sast 
on: 
  push: 
    branches: [ master ] 
  pull_request: 
    branches: [ master ] 
jobs: 
  brakeman: 
    runs-on: ubuntu-latest 
    name: brakeman-scan 
    steps: 
    - name: Checkout the code 
      uses: actions/checkout@v2
    - name: Brakeman-scan  
      run : |
            cd $GITHUB_WORKSPACE 
            sudo gem install brakeman
            brakeman -o output.json || true 
    - uses: actions/upload-artifact@v3
      if: always()
      with:
         name: my-artifact
         path: output.json # or path/to/artifact
    - name: semgrep-scan  
      run : |
            cd $GITHUB_WORKSPACE 
            python3 -m pip install semgrep
            semgrep --config "p/ruby" --json -o semgrep.json
    - uses: actions/upload-artifact@v3
      if: always()
      with:
         name: my-artifact
         path: semgrep.json # or path/to/artifact